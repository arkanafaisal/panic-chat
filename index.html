<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <title>Panic Chat</title>
        <link rel="stylesheet" href="css/output.css">
        <style>

        </style>
    </head>
    <body class="bg-[#22272e]">
        
        <header class="bg-[#1a1d23] h-14 py-2 w-full fixed top-0 left-0 flex items-center justify-around">
            <div id="user-select" class="w-32 h-10 border-1 box-sizing border-white rounded-full flex flex-col" onclick="userSwitch()">
                <div id="user-pointer" class="w-[55%] h-full rounded-full bg-[#25d366] self-end transition-all linear duration-100"></div>
            </div>
            <button class="h-full px-3 flex items-center text-4xl text-white bg-black rounded-full " onclick="openKeyboard()">
                <i class="fa-solid fa-comments"></i>
            </button>
        </header>
        <main class="min-h-[50vh] mt-14">
            <div id="chat-container" class="flex flex-col gap-2 px-2 py-3 ">
                <div id="chat-node" class="box-border p-1 w-fit max-w-[70%] h-auto bg-[#25d366] rounded-2xl text-center self-end font-sans">...</div>
                <input id="input" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="appearance-none border-none outline-none bg-transparent shadow-none text-[#22272e]">
            </div>
        </main>

        <script>
let vh = window.innerHeight * 0.01
document.documentElement.style.setProperty("--vh", vh + "px")


let userSelector = document.getElementById("user-select")
let pointer = document.getElementById("user-pointer")
let chatContainer = document.getElementById("chat-container")
let chats = document.getElementsByClassName("chats")
let chatNode = document.getElementById("chat-node")
let input = document.getElementById("input")

let side = 2
function userSwitch(){
    side = side === 2? 1 : 2
    if(side === 2){
        pointer.classList.add("self-end")
        chatNode.classList.add("self-end")
    }
    else{
        pointer.classList.remove("self-end")
        chatNode.classList.remove("self-end")
    }

    openKeyboard()
}
function openKeyboard(){
    input.focus()
}
        
function enterHandler(input){
    const newChat = chatNode.cloneNode()
    newChat.innerText = input
    chatContainer.insertBefore(newChat, chatNode)
}

document.addEventListener("keydown", e => {
    if(e.key === "Enter" && input.value.trim()){
        enterHandler(input.value)
        input.value = ""
        chatNode.innerText = "..."
    }
    if(e.key === "Tab"){
        e.preventDefault()
        userSwitch()
    }
})
input.addEventListener("input", e =>{
    const inputvalue = input.value
    if(inputvalue.trim() === ""){
        input.value = ""
        chatNode.innerText = "..."
    }
    chatNode.innerText = inputvalue
})
        </script>
    </body>
</html>